"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{8030:(e,t,s)=>{s.d(t,{x:()=>C});var a=s(5155),r=s(7746),n=s(2115),c=s(2591),l=s(689),o=s(1560),i=s(5828);let d=(0,i.createServerReference)("40f2504a14d24e09679455357fe66c559fc9515499",i.callServer,void 0,i.findSourceMapURL,"searchStocks");var m=s(2468);function x(e){let{onStockSelect:t,placeholder:s="Search stocks..."}=e,[r,i]=(0,n.useState)(""),[x,h]=(0,n.useState)([]),[u,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{let e=setTimeout(async()=>{if(r.trim().length>=2){f(!0);try{let[e,t]=await Promise.all([d(r).catch(()=>[]),(0,m.ip)(r).catch(()=>[])]),s=[...e];t.forEach(e=>{s.some(t=>t.symbol===e.symbol)||s.push({symbol:e.symbol,shortname:e.description,longname:e.description,exchange:e.primaryExchange||"Unknown",typeDisp:e.type||"EQUITY",quoteType:"EQUITY"})}),h(s.slice(0,10)),g(!0)}catch(e){console.error("Search error:",e),h([])}finally{f(!1)}}else h([]),g(!1)},300);return()=>clearTimeout(e)},[r]);let y=e=>{i(e),g(!1),null==t||t(e)};return(0,a.jsxs)("div",{ref:b,className:"relative w-full max-w-md",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:s,className:"h-10 w-full rounded-lg bg-card pl-10 pr-10 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent",onFocus:()=>g(!0)}),r&&(0,a.jsx)("button",{onClick:()=>{i(""),h([]),g(!1)},className:"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary hover:text-text-primary",children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})]}),p&&(0,a.jsx)("div",{className:"absolute top-full z-50 mt-1 w-full rounded-lg bg-card shadow-lg ring-1 ring-black/5",children:u?(0,a.jsx)("div",{className:"p-4 text-center text-sm text-text-secondary",children:"Searching..."}):x.length>0?(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto",children:x.map((e,t)=>(0,a.jsx)("button",{onClick:()=>y(e.symbol),className:"flex w-full items-center gap-3 p-3 text-left hover:bg-background",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-text-primary",children:e.symbol}),(0,a.jsx)("div",{className:"text-xs text-text-secondary",children:e.shortname||e.longname}),(0,a.jsxs)("div",{className:"text-xs text-text-secondary",children:[e.exchange," â€¢ ",e.typeDisp]})]})},"".concat(e.symbol,"-").concat(t)))}):r.length>=2?(0,a.jsx)("div",{className:"p-4 text-center text-sm text-text-secondary",children:"No stocks found"}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"mb-2 text-sm font-medium text-text-primary",children:"Popular Stocks"}),(0,a.jsx)("div",{className:"space-y-1",children:[{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"META",name:"Meta Platforms Inc."},{symbol:"TSLA",name:"Tesla Inc."},{symbol:"NVDA",name:"NVIDIA Corporation"},{symbol:"NFLX",name:"Netflix Inc."}].map(e=>(0,a.jsxs)("button",{onClick:()=>y(e.symbol),className:"flex w-full items-center gap-2 rounded p-2 text-left hover:bg-background",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-accent"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-text-primary",children:e.symbol}),(0,a.jsx)("div",{className:"text-xs text-text-secondary",children:e.name})]})]},e.symbol))})]})})]})}function h(){return(0,a.jsxs)("header",{className:"fixed left-sidebar right-0 top-0 z-30 flex h-16 items-center border-b border-card bg-background px-4",children:[(0,a.jsx)("div",{className:"flex flex-1 items-center",children:(0,a.jsx)(x,{onStockSelect:e=>{console.log("Selected stock:",e)},placeholder:"Search stocks, news, or settings..."})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("button",{className:"relative rounded-full p-2 text-text-secondary hover:bg-card hover:text-text-primary",children:[(0,a.jsx)(r.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"absolute right-1 top-1 h-2 w-2 rounded-full bg-accent"})]})})]})}var u=s(8173),f=s.n(u),p=s(5565),g=s(6046),b=s(2404),y=s(282),v=s(650),N=s(3474),j=s(2645),w=s(1354),k=s(3463),S=s(1922);function A(){return(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg bg-gradient-to-br from-accent to-accent/60 p-internal",children:[(0,a.jsx)("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-white/10"}),(0,a.jsx)("div",{className:"absolute -right-4 -top-4 h-16 w-16 rounded-full bg-white/10"}),(0,a.jsx)(S.A,{className:"h-8 w-8 text-white"}),(0,a.jsx)("h2",{className:"mt-4 text-lg font-semibold text-white",children:"Upgrade to Premium"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"Get access to advanced analytics, real-time alerts, and premium features"}),(0,a.jsx)("button",{className:"mt-6 w-full rounded-lg bg-white px-4 py-2 text-sm font-medium text-accent transition-colors hover:bg-white/90",children:"Upgrade Now"})]})}let E=[{name:"Dashboard",href:"/",icon:b.A},{name:"Market",href:"/market",icon:y.A},{name:"Portfolio",href:"/portfolio",icon:v.A},{name:"Settings",href:"/settings",icon:N.A}];function I(){let e=(0,g.useRouter)(),t=(0,g.usePathname)(),[s,r]=(0,n.useState)(null),[c,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("demo_user");e&&r(JSON.parse(e));let t=()=>{let e=localStorage.getItem("demo_user");r(e?JSON.parse(e):null)};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);let o=async()=>{localStorage.removeItem("demo_user"),r(null),e.push("/auth/signin")};return(0,a.jsx)("div",{className:"fixed left-0 top-0 z-40 h-screen w-sidebar border-r border-card bg-background",children:(0,a.jsxs)("div",{className:"flex h-full flex-col px-3 py-4",children:[(0,a.jsx)("div",{className:"mb-10 flex items-center px-3",children:(0,a.jsx)("span",{className:"text-xl font-bold text-accent",children:"TradePro"})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1",children:E.map(e=>{let s=t===e.href;return(0,a.jsxs)(f(),{href:e.href,className:(0,k.A)("group flex items-center rounded-lg px-3 py-2 text-sm font-medium",s?"bg-card text-accent":"text-text-secondary hover:bg-card hover:text-text-primary"),children:[(0,a.jsx)(e.icon,{className:(0,k.A)("mr-3 h-5 w-5",s?"text-accent":"text-text-secondary group-hover:text-text-primary")}),e.name]},e.name)})}),(0,a.jsxs)("div",{className:"mt-auto space-y-4",children:[(0,a.jsx)(A,{}),(0,a.jsx)("div",{className:"border-t border-card pt-4",children:s?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>l(!c),className:"flex w-full items-center gap-3 rounded-lg p-2 text-text-secondary hover:bg-card hover:text-text-primary",children:[(0,a.jsx)(p.default,{src:"https://picsum.photos/id/1/32/32",alt:"User avatar",width:32,height:32,className:"rounded-full shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,a.jsx)("div",{className:"truncate text-sm font-medium text-text-primary",children:s.email}),(0,a.jsx)("div",{className:"text-xs text-text-secondary",children:"Premium Member"})]}),(0,a.jsx)(j.A,{className:"h-4 w-4 shrink-0"})]}),c&&(0,a.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 w-full rounded-lg bg-card py-1 shadow-lg ring-1 ring-black/5",children:[(0,a.jsxs)(f(),{href:"/settings",className:"flex items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:bg-background hover:text-text-primary",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),"Settings"]}),(0,a.jsxs)("button",{onClick:o,className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:bg-background hover:text-text-primary",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),"Sign out"]})]})]}):(0,a.jsxs)(f(),{href:"/auth/signin",className:"flex w-full items-center gap-2 rounded-lg bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent/90",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),"Sign in"]})})]})]})})}function C(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(I,{}),(0,a.jsx)(h,{}),(0,a.jsx)("main",{className:"ml-sidebar pt-16",children:(0,a.jsx)("div",{className:"mx-auto max-w-container p-section",children:t})})]})}},2468:(e,t,s)=>{async function a(e){try{let t=await fetch("/api/finnhub?action=quote&symbol=".concat(e));if(!t.ok)throw Error("Failed to fetch quote");return await t.json()}catch(t){return console.error("Error fetching Finnhub quote for ".concat(e,":"),t),null}}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"D",s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;try{let r=await fetch("/api/finnhub?action=candles&symbol=".concat(e,"&resolution=").concat(t,"&from=").concat(s,"&to=").concat(a));if(!r.ok)throw Error("Failed to fetch candles");return await r.json()}catch(t){return console.error("Error fetching Finnhub candles for ".concat(e,":"),t),null}}async function n(e){try{let t=await fetch("/api/finnhub?action=profile&symbol=".concat(e));if(!t.ok)throw Error("Failed to fetch profile");return await t.json()}catch(t){return console.error("Error fetching company profile for ".concat(e,":"),t),null}}async function c(e){try{let t=await fetch("/api/finnhub?action=search&query=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to search stocks");return(await t.json()).result||[]}catch(e){return console.error("Error searching stocks with Finnhub:",e),[]}}function l(e){let t=Math.floor(Date.now()/1e3);return{from:t-86400*e,to:t}}s.d(t,{Dx:()=>a,ip:()=>c,uo:()=>l,v_:()=>n,zg:()=>r})}}]);