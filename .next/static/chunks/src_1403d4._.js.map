{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/app/actions/stockActions.ts"],"sourcesContent":["'use server';\r\n\r\nimport yahooFinance from 'yahoo-finance2';\r\n\r\n// Configure yahoo-finance2\r\nyahooFinance.setGlobalConfig({\r\n  queue: {\r\n    concurrency: 5,\r\n    timeout: 30000,\r\n  },\r\n});\r\n\r\nexport interface StockQuote {\r\n  symbol: string;\r\n  name: string;\r\n  price: number;\r\n  change: number;\r\n  changePercentage: number;\r\n  volume: number;\r\n  marketCap: number;\r\n}\r\n\r\nexport interface HistoricalData {\r\n  date: Date;\r\n  open: number;\r\n  high: number;\r\n  low: number;\r\n  close: number;\r\n  volume: number;\r\n}\r\n\r\nexport interface SearchResult {\r\n  symbol: string;\r\n  shortname?: string;\r\n  longname?: string;\r\n  exchange: string;\r\n  typeDisp: string;\r\n  quoteType: string;\r\n}\r\n\r\nexport async function getStockQuote(symbol: string): Promise<StockQuote> {\r\n  try {\r\n    // Add retry logic and better error handling\r\n    let retries = 3;\r\n    let lastError: Error | null = null;\r\n\r\n    while (retries > 0) {\r\n      try {\r\n        const quote = await yahooFinance.quote(symbol, {\r\n          fields: [\r\n            'symbol',\r\n            'longName',\r\n            'shortName',\r\n            'regularMarketPrice',\r\n            'regularMarketChange',\r\n            'regularMarketChangePercent',\r\n            'regularMarketVolume',\r\n            'marketCap'\r\n          ]\r\n        });\r\n\r\n        if (!quote) {\r\n          throw new Error(`No data received for ${symbol}`);\r\n        }\r\n\r\n        return {\r\n          symbol: quote.symbol || symbol,\r\n          name: quote.longName || quote.shortName || symbol,\r\n          price: Number(quote.regularMarketPrice) || 0,\r\n          change: Number(quote.regularMarketChange) || 0,\r\n          changePercentage: Number(quote.regularMarketChangePercent) || 0,\r\n          volume: Number(quote.regularMarketVolume) || 0,\r\n          marketCap: Number(quote.marketCap) || 0,\r\n        };\r\n      } catch (error) {\r\n        lastError = error as Error;\r\n        retries--;\r\n        \r\n        if (retries > 0) {\r\n          // Wait before retrying\r\n          await new Promise(resolve => setTimeout(resolve, 1000));\r\n        }\r\n      }\r\n    }\r\n\r\n    // If all retries failed, return a fallback quote\r\n    console.warn(`Failed to fetch quote for ${symbol} after retries, using fallback data`);\r\n    return {\r\n      symbol: symbol,\r\n      name: symbol,\r\n      price: 0,\r\n      change: 0,\r\n      changePercentage: 0,\r\n      volume: 0,\r\n      marketCap: 0,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching quote for ${symbol}:`, error);\r\n    // Return fallback data instead of throwing\r\n    return {\r\n      symbol: symbol,\r\n      name: symbol,\r\n      price: 0,\r\n      change: 0,\r\n      changePercentage: 0,\r\n      volume: 0,\r\n      marketCap: 0,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getHistoricalData(\r\n  symbol: string,\r\n  period: '1d' | '5d' | '1mo' | '3mo' | '6mo' | '1y' = '1mo'\r\n): Promise<HistoricalData[]> {\r\n  try {\r\n    // Using chart instead of historical as recommended\r\n    const result = await yahooFinance.chart(symbol, {\r\n      period1: getStartDate(period),\r\n      period2: new Date(),\r\n      interval: '1d',\r\n      includePrePost: false,\r\n    });\r\n\r\n    if (!result.quotes || result.quotes.length === 0) {\r\n      throw new Error(`No historical data received for ${symbol}`);\r\n    }\r\n\r\n    return result.quotes.map(quote => ({\r\n      date: quote.date,\r\n      open: Number(quote.open) || 0,\r\n      high: Number(quote.high) || 0,\r\n      low: Number(quote.low) || 0,\r\n      close: Number(quote.close) || 0,\r\n      volume: Number(quote.volume) || 0,\r\n    }));\r\n  } catch (error) {\r\n    console.error(`Error fetching historical data for ${symbol}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function searchStocks(query: string): Promise<SearchResult[]> {\r\n  try {\r\n    const results = await yahooFinance.search(query);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return results.quotes\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      .filter((quote: any) => \r\n        quote.quoteType === 'EQUITY' || quote.quoteType === 'ETF'\r\n      )\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      .map((quote: any) => ({\r\n        symbol: quote.symbol || '',\r\n        shortname: quote.shortname,\r\n        longname: quote.longname,\r\n        exchange: quote.exchange || '',\r\n        typeDisp: quote.typeDisp || '',\r\n        quoteType: quote.quoteType || '',\r\n      }));\r\n  } catch (error) {\r\n    console.error(`Error searching stocks with query ${query}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getTrendingStocks(): Promise<StockQuote[]> {\r\n  // FAANG + Popular tech stocks\r\n  const trendingSymbols = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'META', 'TSLA', 'NVDA', 'NFLX'];\r\n  \r\n  try {\r\n    const quotes = await Promise.all(\r\n      trendingSymbols.map(async symbol => {\r\n        try {\r\n          return await getStockQuote(symbol);\r\n        } catch (error) {\r\n          console.error(`Error fetching ${symbol}:`, error);\r\n          // Return a placeholder if individual stock fetch fails\r\n          return {\r\n            symbol,\r\n            name: symbol,\r\n            price: 0,\r\n            change: 0,\r\n            changePercentage: 0,\r\n            volume: 0,\r\n            marketCap: 0\r\n          };\r\n        }\r\n      })\r\n    );\r\n    \r\n    // Filter out any failed fetches that returned placeholder data\r\n    const validQuotes = quotes.filter(quote => quote.price > 0);\r\n    \r\n    if (validQuotes.length === 0) {\r\n      throw new Error('Failed to fetch any valid stock data');\r\n    }\r\n    \r\n    return validQuotes;\r\n  } catch (error) {\r\n    console.error('Error fetching trending stocks:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getDailyGainers(): Promise<StockQuote[]> {\r\n  // Popular stocks that typically have significant daily movements\r\n  const gainerSymbols = ['NVDA', 'AMD', 'TSLA', 'META', 'NFLX', 'CRM', 'ADBE', 'PYPL'];\r\n  \r\n  try {\r\n    const quotes = await Promise.all(\r\n      gainerSymbols.map(async symbol => {\r\n        try {\r\n          return await getStockQuote(symbol);\r\n        } catch (error) {\r\n          console.error(`Error fetching ${symbol}:`, error);\r\n          return {\r\n            symbol,\r\n            name: symbol,\r\n            price: 0,\r\n            change: 0,\r\n            changePercentage: 0,\r\n            volume: 0,\r\n            marketCap: 0\r\n          };\r\n        }\r\n      })\r\n    );\r\n    \r\n    const validQuotes = quotes.filter(quote => quote.price > 0);\r\n    \r\n    // Sort by percentage gain (highest first)\r\n    return validQuotes\r\n      .filter(quote => quote.changePercentage > 0)\r\n      .sort((a, b) => b.changePercentage - a.changePercentage)\r\n      .slice(0, 6); // Return top 6 gainers\r\n  } catch (error) {\r\n    console.error('Error fetching daily gainers:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getDailyLosers(): Promise<StockQuote[]> {\r\n  // Popular stocks that typically have significant daily movements\r\n  const loserSymbols = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'META', 'TSLA', 'NVDA', 'NFLX'];\r\n  \r\n  try {\r\n    const quotes = await Promise.all(\r\n      loserSymbols.map(async symbol => {\r\n        try {\r\n          return await getStockQuote(symbol);\r\n        } catch (error) {\r\n          console.error(`Error fetching ${symbol}:`, error);\r\n          return {\r\n            symbol,\r\n            name: symbol,\r\n            price: 0,\r\n            change: 0,\r\n            changePercentage: 0,\r\n            volume: 0,\r\n            marketCap: 0\r\n          };\r\n        }\r\n      })\r\n    );\r\n    \r\n    const validQuotes = quotes.filter(quote => quote.price > 0);\r\n    \r\n    // Sort by percentage loss (lowest first)\r\n    return validQuotes\r\n      .filter(quote => quote.changePercentage < 0)\r\n      .sort((a, b) => a.changePercentage - b.changePercentage)\r\n      .slice(0, 6); // Return top 6 losers\r\n  } catch (error) {\r\n    console.error('Error fetching daily losers:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Helper function to calculate start date based on period\r\nfunction getStartDate(period: '1d' | '5d' | '1mo' | '3mo' | '6mo' | '1y'): Date {\r\n  const now = new Date();\r\n  switch (period) {\r\n    case '1d':\r\n      return new Date(now.setDate(now.getDate() - 1));\r\n    case '5d':\r\n      return new Date(now.setDate(now.getDate() - 5));\r\n    case '1mo':\r\n      return new Date(now.setMonth(now.getMonth() - 1));\r\n    case '3mo':\r\n      return new Date(now.setMonth(now.getMonth() - 3));\r\n    case '6mo':\r\n      return new Date(now.setMonth(now.getMonth() - 6));\r\n    case '1y':\r\n      return new Date(now.setFullYear(now.getFullYear() - 1));\r\n    default:\r\n      return new Date(now.setMonth(now.getMonth() - 1));\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;IAwCsB;IAuEA;IA+BA;IAwBA;IAuCA;IAqCA"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/SearchBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Search, X, TrendingUp } from \"lucide-react\";\r\nimport { searchStocks, SearchResult } from \"@/app/actions/stockActions\";\r\n\r\ninterface SearchBarProps {\r\n  onStockSelect?: (symbol: string) => void;\r\n  placeholder?: string;\r\n}\r\n\r\nexport function SearchBar({ onStockSelect, placeholder = \"Search stocks...\" }: SearchBarProps) {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const searchRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Popular stocks for quick access\r\n  const popularStocks = [\r\n    { symbol: \"AAPL\", name: \"Apple Inc.\" },\r\n    { symbol: \"MSFT\", name: \"Microsoft Corporation\" },\r\n    { symbol: \"GOOGL\", name: \"Alphabet Inc.\" },\r\n    { symbol: \"AMZN\", name: \"Amazon.com Inc.\" },\r\n    { symbol: \"META\", name: \"Meta Platforms Inc.\" },\r\n    { symbol: \"TSLA\", name: \"Tesla Inc.\" },\r\n    { symbol: \"NVDA\", name: \"NVIDIA Corporation\" },\r\n    { symbol: \"NFLX\", name: \"Netflix Inc.\" },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\r\n        setShowResults(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const searchTimeout = setTimeout(async () => {\r\n      if (query.trim().length >= 2) {\r\n        setIsLoading(true);\r\n        try {\r\n          const searchResults = await searchStocks(query);\r\n          setResults(searchResults.slice(0, 10)); // Limit to 10 results\r\n          setShowResults(true);\r\n        } catch (error) {\r\n          console.error(\"Search error:\", error);\r\n          setResults([]);\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      } else {\r\n        setResults([]);\r\n        setShowResults(false);\r\n      }\r\n    }, 300); // Debounce search\r\n\r\n    return () => clearTimeout(searchTimeout);\r\n  }, [query]);\r\n\r\n  const handleStockSelect = (symbol: string) => {\r\n    setQuery(symbol);\r\n    setShowResults(false);\r\n    if (onStockSelect) {\r\n      onStockSelect(symbol);\r\n    } else {\r\n      // Default behavior: open stock detail modal\r\n      window.open(`/stock/${symbol}`, '_blank');\r\n    }\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setQuery(\"\");\r\n    setResults([]);\r\n    setShowResults(false);\r\n  };\r\n\r\n  return (\r\n    <div ref={searchRef} className=\"relative w-full max-w-md\">\r\n      <div className=\"relative\">\r\n        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary\" />\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder={placeholder}\r\n          className=\"h-10 w-full rounded-lg bg-card pl-10 pr-10 text-sm text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n          onFocus={() => setShowResults(true)}\r\n        />\r\n        {query && (\r\n          <button\r\n            onClick={clearSearch}\r\n            className=\"absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary hover:text-text-primary\"\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Search Results Dropdown */}\r\n      {showResults && (\r\n        <div className=\"absolute top-full z-50 mt-1 w-full rounded-lg bg-card shadow-lg ring-1 ring-black/5\">\r\n          {isLoading ? (\r\n            <div className=\"p-4 text-center text-sm text-text-secondary\">\r\n              Searching...\r\n            </div>\r\n          ) : results.length > 0 ? (\r\n            <div className=\"max-h-64 overflow-y-auto\">\r\n              {results.map((result, index) => (\r\n                <button\r\n                  key={`${result.symbol}-${index}`}\r\n                  onClick={() => handleStockSelect(result.symbol)}\r\n                  className=\"flex w-full items-center gap-3 p-3 text-left hover:bg-background transition-colors\"\r\n                >\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-text-primary\">\r\n                      {result.symbol}\r\n                    </div>\r\n                    <div className=\"text-xs text-text-secondary\">\r\n                      {result.shortname || result.longname}\r\n                    </div>\r\n                    <div className=\"text-xs text-text-secondary\">\r\n                      {result.exchange} • {result.typeDisp}\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          ) : query.length >= 2 ? (\r\n            <div className=\"p-4 text-center text-sm text-text-secondary\">\r\n              No stocks found\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4\">\r\n              <div className=\"mb-2 text-sm font-medium text-text-primary\">\r\n                Popular Stocks\r\n              </div>\r\n              <div className=\"space-y-1\">\r\n                {popularStocks.map((stock) => (\r\n                  <button\r\n                    key={stock.symbol}\r\n                    onClick={() => handleStockSelect(stock.symbol)}\r\n                    className=\"flex w-full items-center gap-2 rounded p-2 text-left hover:bg-background transition-colors\"\r\n                  >\r\n                    <TrendingUp className=\"h-4 w-4 text-accent\" />\r\n                    <div>\r\n                      <div className=\"font-medium text-text-primary\">\r\n                        {stock.symbol}\r\n                      </div>\r\n                      <div className=\"text-xs text-text-secondary\">\r\n                        {stock.name}\r\n                      </div>\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/LoadingSpinner.tsx"],"sourcesContent":["interface LoadingSpinnerProps {\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nexport function LoadingSpinner({ size = 'md', className = '' }: LoadingSpinnerProps) {\r\n  const sizeClasses = {\r\n    sm: 'h-4 w-4',\r\n    md: 'h-6 w-6',\r\n    lg: 'h-8 w-8',\r\n  };\r\n\r\n  return (\r\n    <div className={`animate-spin rounded-full border-2 border-text-secondary border-t-accent ${sizeClasses[size]} ${className}`} />\r\n  );\r\n} "],"names":[],"mappings":";;;;;AAKO,SAAS,eAAe,EAAE,OAAO,IAAI,EAAE,YAAY,EAAE,EAAuB;IACjF,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,6LAAC;QAAI,WAAW,CAAC,yEAAyE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;;;;;;AAEhI;KAVgB"}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/StockDetailModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { X, ExternalLink, TrendingUp, TrendingDown, Building2, Globe } from \"lucide-react\";\r\nimport { getStockQuote, getHistoricalData } from \"@/app/actions/stockActions\";\r\nimport { LoadingSpinner } from \"./LoadingSpinner\";\r\n\r\ninterface StockDetailModalProps {\r\n  symbol: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface QuoteData {\r\n  symbol: string;\r\n  name: string;\r\n  price: number;\r\n  change: number;\r\n  changePercentage: number;\r\n  volume: number;\r\n  marketCap: number;\r\n}\r\n\r\nexport function StockDetailModal({ symbol, isOpen, onClose }: StockDetailModalProps) {\r\n  const [quote, setQuote] = useState<QuoteData | null>(null);\r\n  const [chartData, setChartData] = useState<number[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && symbol) {\r\n      fetchStockData();\r\n    }\r\n  }, [isOpen, symbol]);\r\n\r\n  const fetchStockData = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const [quoteData, historicalData] = await Promise.all([\r\n        getStockQuote(symbol),\r\n        getHistoricalData(symbol, '1mo'),\r\n      ]);\r\n\r\n      setQuote(quoteData);\r\n      setChartData(historicalData.map(item => item.close));\r\n    } catch (err) {\r\n      console.error('Error fetching stock data:', err);\r\n      setError('Failed to load stock data');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const isPositive = quote?.change ? quote.change >= 0 : false;\r\n\r\n  const renderChart = () => {\r\n    if (chartData.length === 0) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-64 text-text-secondary\">\r\n          No chart data available\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const max = Math.max(...chartData);\r\n    const min = Math.min(...chartData);\r\n    const range = max - min;\r\n\r\n    if (range === 0) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-64 text-text-secondary\">\r\n          Flat line\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <svg\r\n        className=\"w-full h-64\"\r\n        viewBox={`0 0 ${chartData.length - 1} ${range}`}\r\n        preserveAspectRatio=\"none\"\r\n      >\r\n        <path\r\n          d={`M 0 ${chartData[0] - min} ${chartData\r\n            .slice(1)\r\n            .map((point, i) => `L ${i + 1} ${point - min}`)\r\n            .join(\" \")}`}\r\n          fill=\"none\"\r\n          stroke={isPositive ? \"#00C853\" : \"#FF3D00\"}\r\n          strokeWidth=\"2\"\r\n          vectorEffect=\"non-scaling-stroke\"\r\n        />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-background rounded-lg shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-card\">\r\n          <div>\r\n            <h2 className=\"text-xl font-bold\">{symbol}</h2>\r\n            <p className=\"text-text-secondary\">{quote?.name || 'Loading...'}</p>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={() => window.open(`https://finance.yahoo.com/quote/${symbol}`, '_blank')}\r\n              className=\"p-2 text-text-secondary hover:text-accent transition-colors\"\r\n              title=\"View on Yahoo Finance\"\r\n            >\r\n              <ExternalLink className=\"h-5 w-5\" />\r\n            </button>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-text-secondary hover:text-text-primary transition-colors\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {isLoading ? (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n              <LoadingSpinner size=\"lg\" />\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"flex items-center justify-center h-64 text-error\">\r\n              {error}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {/* Price Section */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"bg-card rounded-lg p-4\">\r\n                  <div className=\"text-sm text-text-secondary\">Current Price</div>\r\n                  <div className=\"text-2xl font-bold\">${quote?.price?.toFixed(2) || 'N/A'}</div>\r\n                  <div className={`flex items-center gap-1 text-sm ${isPositive ? 'text-success' : 'text-error'}`}>\r\n                    {isPositive ? <TrendingUp className=\"h-4 w-4\" /> : <TrendingDown className=\"h-4 w-4\" />}\r\n                    <span>${Math.abs(quote?.change || 0).toFixed(2)}</span>\r\n                    <span>({Math.abs(quote?.changePercentage || 0).toFixed(2)}%)</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card rounded-lg p-4\">\r\n                  <div className=\"text-sm text-text-secondary\">Volume</div>\r\n                  <div className=\"text-lg font-semibold\">\r\n                    {quote?.volume?.toLocaleString() || 'N/A'}\r\n                  </div>\r\n                  <div className=\"text-sm text-text-secondary\">\r\n                    Shares traded today\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card rounded-lg p-4\">\r\n                  <div className=\"text-sm text-text-secondary\">Market Cap</div>\r\n                  <div className=\"text-lg font-semibold\">\r\n                    ${quote?.marketCap?.toLocaleString() || 'N/A'}\r\n                  </div>\r\n                  <div className=\"text-sm text-text-secondary\">\r\n                    Total market value\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Chart */}\r\n              <div className=\"bg-card rounded-lg p-4\">\r\n                <h3 className=\"text-lg font-semibold mb-4\">Price Chart (1 Month)</h3>\r\n                {renderChart()}\r\n              </div>\r\n\r\n              {/* Company Information */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"bg-card rounded-lg p-4\">\r\n                  <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n                    <Building2 className=\"h-5 w-5\" />\r\n                    Stock Information\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Symbol</div>\r\n                      <div className=\"font-medium\">{symbol}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Company Name</div>\r\n                      <div className=\"font-medium\">{quote?.name || 'N/A'}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Current Price</div>\r\n                      <div className=\"font-medium\">${quote?.price?.toFixed(2) || 'N/A'}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Daily Change</div>\r\n                      <div className={`font-medium ${isPositive ? 'text-success' : 'text-error'}`}>\r\n                        {isPositive ? '+' : ''}{quote?.change?.toFixed(2) || 'N/A'} ({quote?.changePercentage?.toFixed(2) || 'N/A'}%)\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card rounded-lg p-4\">\r\n                  <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n                    <Globe className=\"h-5 w-5\" />\r\n                    Market Data\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Volume</div>\r\n                      <div className=\"font-medium\">{quote?.volume?.toLocaleString() || 'N/A'}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Market Cap</div>\r\n                      <div className=\"font-medium\">\r\n                        ${quote?.marketCap?.toLocaleString() || 'N/A'}\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Data Source</div>\r\n                      <div className=\"font-medium\">Yahoo Finance</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm text-text-secondary\">Last Updated</div>\r\n                      <div className=\"font-medium\">{new Date().toLocaleString()}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 1063, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1069, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/layout/Header.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Bell } from \"lucide-react\";\r\nimport { SearchBar } from \"@/components/features/SearchBar\";\r\nimport { StockDetailModal } from \"@/components/features/StockDetailModal\";\r\n\r\nexport function Header() {\r\n  const [selectedStock, setSelectedStock] = useState<string | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const handleStockSelect = (symbol: string) => {\r\n    setSelectedStock(symbol);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedStock(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header className=\"fixed left-sidebar right-0 top-0 z-30 flex h-16 items-center border-b border-card bg-background px-4\">\r\n        <div className=\"flex flex-1 items-center\">\r\n          <SearchBar\r\n            onStockSelect={handleStockSelect}\r\n            placeholder=\"Search stocks, news, or settings...\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex items-center\">\r\n          <button className=\"relative rounded-full p-2 text-text-secondary hover:bg-card hover:text-text-primary\">\r\n            <Bell className=\"h-5 w-5\" />\r\n            <span className=\"absolute right-1 top-1 h-2 w-2 rounded-full bg-accent\" />\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Stock Detail Modal */}\r\n      {selectedStock && (\r\n        <StockDetailModal\r\n          symbol={selectedStock}\r\n          isOpen={isModalOpen}\r\n          onClose={handleCloseModal}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AAFA;;;AAHA;;;;;AAOO,SAAS;;IACd,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,oBAAoB,CAAC;QACzB,iBAAiB;QACjB,eAAe;IACjB;IAEA,MAAM,mBAAmB;QACvB,eAAe;QACf,iBAAiB;IACnB;IAEA,qBACE;;0BACE,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,8IAAA,CAAA,YAAS;4BACR,eAAe;4BACf,aAAY;;;;;;;;;;;kCAIhB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAO,WAAU;;8CAChB,6LAAC,qMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;8CAChB,6LAAC;oCAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;YAMrB,+BACC,6LAAC,qJAAA,CAAA,mBAAgB;gBACf,QAAQ;gBACR,QAAQ;gBACR,SAAS;;;;;;;;AAKnB;GA1CgB;KAAA"}},
    {"offset": {"line": 1171, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1177, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/PremiumCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Crown } from \"lucide-react\";\r\n\r\nexport function PremiumCard() {\r\n  return (\r\n    <div className=\"relative overflow-hidden rounded-lg bg-gradient-to-br from-accent to-accent/60 p-internal\">\r\n      <div className=\"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-white/10\" />\r\n      <div className=\"absolute -right-4 -top-4 h-16 w-16 rounded-full bg-white/10\" />\r\n\r\n      <Crown className=\"h-8 w-8 text-white\" />\r\n\r\n      <h2 className=\"mt-4 text-lg font-semibold text-white\">\r\n        Upgrade to Premium\r\n      </h2>\r\n      <p className=\"mt-2 text-sm text-white/80\">\r\n        Get access to advanced analytics, real-time alerts, and premium features\r\n      </p>\r\n\r\n      <button className=\"mt-6 w-full rounded-lg bg-white px-4 py-2 text-sm font-medium text-accent transition-colors hover:bg-white/90\">\r\n        Upgrade Now\r\n      </button>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;;;;;;0BAEf,6LAAC,uMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;0BAEjB,6LAAC;gBAAG,WAAU;0BAAwC;;;;;;0BAGtD,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAI1C,6LAAC;gBAAO,WAAU;0BAAgH;;;;;;;;;;;;AAKxI;KApBgB"}},
    {"offset": {"line": 1247, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1253, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/layout/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { LayoutDashboard, LineChart, PieChart, Settings, LogOut, ChevronDown } from \"lucide-react\";\r\nimport clsx from \"clsx\";\r\nimport { PremiumCard } from \"@/components/features/PremiumCard\";\r\n\r\nconst navigation = [\r\n  { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\r\n  { name: \"Market\", href: \"/market\", icon: LineChart },\r\n  { name: \"Portfolio\", href: \"/portfolio\", icon: PieChart },\r\n  { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n];\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  role: string;\r\n}\r\n\r\nexport function Sidebar() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Demo: Get user from localStorage\r\n    const demoUser = localStorage.getItem('demo_user');\r\n    if (demoUser) {\r\n      setUser(JSON.parse(demoUser));\r\n    }\r\n\r\n    // Listen for storage changes (for demo purposes)\r\n    const handleStorageChange = () => {\r\n      const updatedUser = localStorage.getItem('demo_user');\r\n      setUser(updatedUser ? JSON.parse(updatedUser) : null);\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n    return () => window.removeEventListener('storage', handleStorageChange);\r\n  }, []);\r\n\r\n  const handleSignOut = async () => {\r\n    // Demo: Clear mock user data\r\n    localStorage.removeItem('demo_user');\r\n    setUser(null);\r\n    router.push(\"/auth/signin\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed left-0 top-0 z-40 h-screen w-sidebar border-r border-card bg-background\">\r\n      <div className=\"flex h-full flex-col px-3 py-4\">\r\n        <div className=\"mb-10 flex items-center px-3\">\r\n          <span className=\"text-xl font-bold text-accent\">TradePro</span>\r\n        </div>\r\n\r\n        <nav className=\"flex-1 space-y-1\">\r\n          {navigation.map((item) => {\r\n            const isActive = pathname === item.href;\r\n            return (\r\n              <Link\r\n                key={item.name}\r\n                href={item.href}\r\n                className={clsx(\r\n                  \"group flex items-center rounded-lg px-3 py-2 text-sm font-medium\",\r\n                  isActive\r\n                    ? \"bg-card text-accent\"\r\n                    : \"text-text-secondary hover:bg-card hover:text-text-primary\"\r\n                )}\r\n              >\r\n                <item.icon\r\n                  className={clsx(\r\n                    \"mr-3 h-5 w-5\",\r\n                    isActive ? \"text-accent\" : \"text-text-secondary group-hover:text-text-primary\"\r\n                  )}\r\n                />\r\n                {item.name}\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n\r\n        <div className=\"mt-auto space-y-4\">\r\n          <PremiumCard />\r\n          <div className=\"border-t border-card pt-4\">\r\n            {user ? (\r\n              <div className=\"relative\">\r\n                <button\r\n                  onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n                  className=\"flex w-full items-center gap-3 rounded-lg p-2 text-text-secondary hover:bg-card hover:text-text-primary\"\r\n                >\r\n                  <Image\r\n                    src=\"https://picsum.photos/id/1/32/32\"\r\n                    alt=\"User avatar\"\r\n                    width={32}\r\n                    height={32}\r\n                    className=\"rounded-full shrink-0\"\r\n                  />\r\n                  <div className=\"min-w-0 flex-1 text-left\">\r\n                    <div className=\"truncate text-sm font-medium text-text-primary\">\r\n                      {user.email}\r\n                    </div>\r\n                    <div className=\"text-xs text-text-secondary\">Premium Member</div>\r\n                  </div>\r\n                  <ChevronDown className=\"h-4 w-4 shrink-0\" />\r\n                </button>\r\n\r\n                {isMenuOpen && (\r\n                  <div className=\"absolute bottom-full left-0 mb-2 w-full rounded-lg bg-card py-1 shadow-lg ring-1 ring-black/5\">\r\n                    <Link\r\n                      href=\"/settings\"\r\n                      className=\"flex items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:bg-background hover:text-text-primary\"\r\n                    >\r\n                      <Settings className=\"h-4 w-4\" />\r\n                      Settings\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleSignOut}\r\n                      className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-text-secondary hover:bg-background hover:text-text-primary\"\r\n                    >\r\n                      <LogOut className=\"h-4 w-4\" />\r\n                      Sign out\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <Link\r\n                href=\"/auth/signin\"\r\n                className=\"flex w-full items-center gap-2 rounded-lg bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent/90\"\r\n              >\r\n                <LogOut className=\"h-4 w-4\" />\r\n                Sign in\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 1550, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1556, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/layout/Dashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Header } from \"./Header\";\r\nimport { Sidebar } from \"./Sidebar\";\r\n\r\ninterface DashboardProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function Dashboard({ children }: DashboardProps) {\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Sidebar />\r\n      <Header />\r\n      <main className=\"ml-sidebar pt-16\">\r\n        <div className=\"mx-auto max-w-container p-section\">\r\n          {children}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AASO,SAAS,UAAU,EAAE,QAAQ,EAAkB;IACpD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,0IAAA,CAAA,UAAO;;;;;0BACR,6LAAC,yIAAA,CAAA,SAAM;;;;;0BACP,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX;KAZgB"}},
    {"offset": {"line": 1608, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1614, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/portfolio/AssetDistribution.tsx"],"sourcesContent":["\"use client\";\r\n\r\ninterface PortfolioHolding {\r\n  symbol: string;\r\n  name: string;\r\n  shares: number;\r\n  avgPrice: number;\r\n  currentPrice: number;\r\n  value: number;\r\n  return: number;\r\n  returnPercentage: number;\r\n}\r\n\r\ninterface AssetDistributionProps {\r\n  holdings: PortfolioHolding[];\r\n  totalValue: number;\r\n  cashBalance: number;\r\n}\r\n\r\nconst colors = [\r\n  \"#F7931A\", // Orange\r\n  \"#627EEA\", // Blue\r\n  \"#00FFA3\", // Green\r\n  \"#26A17B\", // Teal\r\n  \"#FF6B6B\", // Red\r\n  \"#4ECDC4\", // Cyan\r\n  \"#45B7D1\", // Light Blue\r\n  \"#96CEB4\", // Mint\r\n  \"#FFEAA7\", // Yellow\r\n  \"#DDA0DD\", // Plum\r\n];\r\n\r\nconst cashColor = \"#10B981\"; // Emerald green for cash\r\n\r\nexport function AssetDistribution({ holdings, totalValue, cashBalance }: AssetDistributionProps) {\r\n  if (holdings.length === 0 && cashBalance === 0) {\r\n    return (\r\n      <div className=\"bg-card rounded-lg p-6\">\r\n        <h2 className=\"text-lg font-semibold mb-4\">Asset Distribution</h2>\r\n        <div className=\"flex items-center justify-center h-64 text-text-secondary\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl mb-2\">📊</div>\r\n            <div>No assets in portfolio yet</div>\r\n            <div className=\"text-sm mt-1\">Add some stocks or deposit cash to see your distribution</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Create assets array including cash\r\n  const assets = [];\r\n  \r\n  // Add stocks first\r\n  holdings.forEach((holding, index) => {\r\n    if (holding.value > 0) { // Only add stocks with positive value\r\n      assets.push({\r\n        symbol: holding.symbol,\r\n        name: holding.name,\r\n        value: holding.value,\r\n        color: colors[index % colors.length],\r\n        percentage: totalValue > 0 ? (holding.value / totalValue) * 100 : 0,\r\n      });\r\n    }\r\n  });\r\n\r\n  // Add cash if it exists and total value is positive\r\n  if (cashBalance > 0 && totalValue > 0) {\r\n    assets.push({\r\n      symbol: \"CASH\",\r\n      name: \"Cash\",\r\n      value: cashBalance,\r\n      color: cashColor,\r\n      percentage: (cashBalance / totalValue) * 100,\r\n    });\r\n  }\r\n\r\n  // Ensure percentages don't exceed 100%\r\n  const totalPercentage = assets.reduce((sum, asset) => sum + asset.percentage, 0);\r\n  if (totalPercentage > 100) {\r\n    // Normalize percentages to fit within 100%\r\n    assets.forEach(asset => {\r\n      asset.percentage = (asset.percentage / totalPercentage) * 100;\r\n    });\r\n  }\r\n\r\n  // Calculate SVG path for donut chart\r\n  const radius = 80;\r\n  const strokeWidth = 20;\r\n  const centerX = 100;\r\n  const centerY = 100;\r\n  let currentAngle = -90; // Start from top\r\n\r\n  const createDonutPath = () => {\r\n    const paths = assets.map((asset, index) => {\r\n      const percentage = Math.min(asset.percentage, 100); // Ensure percentage doesn't exceed 100%\r\n      const angle = (percentage / 100) * 360;\r\n      const startAngle = currentAngle;\r\n      const endAngle = currentAngle + angle;\r\n\r\n      const x1 = centerX + radius * Math.cos((startAngle * Math.PI) / 180);\r\n      const y1 = centerY + radius * Math.sin((startAngle * Math.PI) / 180);\r\n      const x2 = centerX + radius * Math.cos((endAngle * Math.PI) / 180);\r\n      const y2 = centerY + radius * Math.sin((endAngle * Math.PI) / 180);\r\n\r\n      const largeArcFlag = angle > 180 ? 1 : 0;\r\n\r\n      const path = [\r\n        `M ${x1} ${y1}`,\r\n        `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${x2} ${y2}`,\r\n      ].join(\" \");\r\n\r\n      currentAngle += angle;\r\n      return (\r\n        <path\r\n          key={index}\r\n          d={path}\r\n          fill=\"none\"\r\n          stroke={asset.color}\r\n          strokeWidth={strokeWidth}\r\n          strokeLinecap=\"round\"\r\n        />\r\n      );\r\n    });\r\n\r\n    return paths;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg p-6\">\r\n      <h2 className=\"text-lg font-semibold mb-4\">Asset Distribution</h2>\r\n      <div className=\"flex items-center gap-8\">\r\n        {/* Donut Chart */}\r\n        <div className=\"relative\">\r\n          <svg width=\"200\" height=\"200\" viewBox=\"0 0 200 200\">\r\n            {createDonutPath()}\r\n          </svg>\r\n          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold\">${totalValue.toLocaleString()}</div>\r\n              <div className=\"text-sm text-text-secondary\">Total Value</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div className=\"flex-1\">\r\n          <div className=\"space-y-3\">\r\n            {assets.map((asset, index) => (\r\n              <div key={index} className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div\r\n                    className=\"w-4 h-4 rounded-full\"\r\n                    style={{ backgroundColor: asset.color }}\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">{asset.symbol}</div>\r\n                    <div className=\"text-sm text-text-secondary\">{asset.name}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"font-medium\">${asset.value.toLocaleString()}</div>\r\n                  <div className=\"text-sm text-text-secondary\">\r\n                    {asset.percentage.toFixed(1)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 1944, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1950, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/portfolio/HoldingsTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ArrowUp, ArrowDown, Trash2, Edit } from \"lucide-react\";\r\n\r\ninterface PortfolioHolding {\r\n  symbol: string;\r\n  name: string;\r\n  shares: number;\r\n  avgPrice: number;\r\n  currentPrice: number;\r\n  value: number;\r\n  return: number;\r\n  returnPercentage: number;\r\n}\r\n\r\ninterface HoldingsTableProps {\r\n  holdings: PortfolioHolding[];\r\n  onRemoveStock: (symbol: string) => void;\r\n  onEditStock: (holding: PortfolioHolding) => void;\r\n}\r\n\r\nexport function HoldingsTable({ holdings, onRemoveStock, onEditStock }: HoldingsTableProps) {\r\n  if (holdings.length === 0) {\r\n    return (\r\n      <div className=\"bg-card rounded-lg p-6\">\r\n        <div className=\"text-center text-text-secondary\">\r\n          <div className=\"text-2xl mb-2\">📈</div>\r\n          <div>No stocks in your portfolio yet</div>\r\n          <div className=\"text-sm mt-1\">Add some stocks to start tracking your investments</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg overflow-hidden\">\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-background\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Asset\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Shares\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Avg Price\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Current Price\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Value\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Return\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-text-secondary uppercase tracking-wider\">\r\n                Actions\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-background\">\r\n            {holdings.map((holding) => {\r\n              const isPositive = holding.return >= 0;\r\n              return (\r\n                <tr key={holding.symbol} className=\"hover:bg-background/50 transition-colors\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div>\r\n                      <div className=\"font-medium text-text-primary\">{holding.symbol}</div>\r\n                      <div className=\"text-sm text-text-secondary\">{holding.name}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-text-primary\">\r\n                    {holding.shares.toLocaleString()}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-text-primary\">\r\n                    ${holding.avgPrice.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-text-primary\">\r\n                    ${holding.currentPrice.toFixed(2)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-text-primary\">\r\n                    ${holding.value.toLocaleString()}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className={`flex items-center gap-1 text-sm ${isPositive ? 'text-success' : 'text-error'}`}>\r\n                      {isPositive ? (\r\n                        <ArrowUp className=\"h-4 w-4\" />\r\n                      ) : (\r\n                        <ArrowDown className=\"h-4 w-4\" />\r\n                      )}\r\n                      <span>${Math.abs(holding.return).toFixed(2)}</span>\r\n                      <span>({holding.returnPercentage.toFixed(2)}%)</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() => onEditStock(holding)}\r\n                        className=\"text-accent hover:text-accent/80 transition-colors\"\r\n                        title=\"Edit position\"\r\n                      >\r\n                        <Edit className=\"h-4 w-4\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => onRemoveStock(holding.symbol)}\r\n                        className=\"text-error hover:text-error/80 transition-colors\"\r\n                        title=\"Remove from portfolio\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;AAFA;;;AAqBO,SAAS,cAAc,EAAE,QAAQ,EAAE,aAAa,EAAE,WAAW,EAAsB;IACxF,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCAAgB;;;;;;kCAC/B,6LAAC;kCAAI;;;;;;kCACL,6LAAC;wBAAI,WAAU;kCAAe;;;;;;;;;;;;;;;;;IAItC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBAAM,WAAU;kCACf,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;8CAGrG,6LAAC;oCAAG,WAAU;8CAAuF;;;;;;;;;;;;;;;;;kCAKzG,6LAAC;wBAAM,WAAU;kCACd,SAAS,GAAG,CAAC,CAAC;4BACb,MAAM,aAAa,QAAQ,MAAM,IAAI;4BACrC,qBACE,6LAAC;gCAAwB,WAAU;;kDACjC,6LAAC;wCAAG,WAAU;kDACZ,cAAA,6LAAC;;8DACC,6LAAC;oDAAI,WAAU;8DAAiC,QAAQ,MAAM;;;;;;8DAC9D,6LAAC;oDAAI,WAAU;8DAA+B,QAAQ,IAAI;;;;;;;;;;;;;;;;;kDAG9D,6LAAC;wCAAG,WAAU;kDACX,QAAQ,MAAM,CAAC,cAAc;;;;;;kDAEhC,6LAAC;wCAAG,WAAU;;4CAAwD;4CAClE,QAAQ,QAAQ,CAAC,OAAO,CAAC;;;;;;;kDAE7B,6LAAC;wCAAG,WAAU;;4CAAwD;4CAClE,QAAQ,YAAY,CAAC,OAAO,CAAC;;;;;;;kDAEjC,6LAAC;wCAAG,WAAU;;4CAAwD;4CAClE,QAAQ,KAAK,CAAC,cAAc;;;;;;;kDAEhC,6LAAC;wCAAG,WAAU;kDACZ,cAAA,6LAAC;4CAAI,WAAW,CAAC,gCAAgC,EAAE,aAAa,iBAAiB,cAAc;;gDAC5F,2BACC,6LAAC,+MAAA,CAAA,UAAO;oDAAC,WAAU;;;;;yEAEnB,6LAAC,mNAAA,CAAA,YAAS;oDAAC,WAAU;;;;;;8DAEvB,6LAAC;;wDAAK;wDAAE,KAAK,GAAG,CAAC,QAAQ,MAAM,EAAE,OAAO,CAAC;;;;;;;8DACzC,6LAAC;;wDAAK;wDAAE,QAAQ,gBAAgB,CAAC,OAAO,CAAC;wDAAG;;;;;;;;;;;;;;;;;;kDAGhD,6LAAC;wCAAG,WAAU;kDACZ,cAAA,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDACC,SAAS,IAAM,YAAY;oDAC3B,WAAU;oDACV,OAAM;8DAEN,cAAA,6LAAC,8MAAA,CAAA,OAAI;wDAAC,WAAU;;;;;;;;;;;8DAElB,6LAAC;oDACC,SAAS,IAAM,cAAc,QAAQ,MAAM;oDAC3C,WAAU;oDACV,OAAM;8DAEN,cAAA,6LAAC,6MAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;+BA5CjB,QAAQ,MAAM;;;;;wBAkD3B;;;;;;;;;;;;;;;;;;;;;;AAMZ;KAtGgB"}},
    {"offset": {"line": 2293, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2299, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/portfolio/AddStockModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X, Search, Plus } from \"lucide-react\";\r\nimport { searchStocks, SearchResult } from \"@/app/actions/stockActions\";\r\n\r\ninterface PortfolioHolding {\r\n  symbol: string;\r\n  name: string;\r\n  shares: number;\r\n  avgPrice: number;\r\n  currentPrice: number;\r\n  value: number;\r\n  return: number;\r\n  returnPercentage: number;\r\n}\r\n\r\ninterface AddStockModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onAddStock: (holding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'>) => void;\r\n  existingHoldings: PortfolioHolding[];\r\n}\r\n\r\nexport function AddStockModal({ isOpen, onClose, onAddStock, existingHoldings }: AddStockModalProps) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [selectedStock, setSelectedStock] = useState<SearchResult | null>(null);\r\n  const [shares, setShares] = useState(\"\");\r\n  const [avgPrice, setAvgPrice] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSearch = async (query: string) => {\r\n    setSearchQuery(query);\r\n    if (query.length >= 2) {\r\n      setIsSearching(true);\r\n      try {\r\n        const results = await searchStocks(query);\r\n        // Filter out stocks already in portfolio\r\n        const filteredResults = results.filter(\r\n          result => !existingHoldings.some(holding => holding.symbol === result.symbol)\r\n        );\r\n        setSearchResults(filteredResults.slice(0, 10));\r\n      } catch (error) {\r\n        console.error(\"Search error:\", error);\r\n        setSearchResults([]);\r\n      } finally {\r\n        setIsSearching(false);\r\n      }\r\n    } else {\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  const handleStockSelect = (stock: SearchResult) => {\r\n    setSelectedStock(stock);\r\n    setSearchResults([]);\r\n    setSearchQuery(stock.symbol);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedStock || !shares || !avgPrice) {\r\n      alert(\"Please fill in all fields\");\r\n      return;\r\n    }\r\n\r\n    const sharesNum = parseFloat(shares);\r\n    const avgPriceNum = parseFloat(avgPrice);\r\n\r\n    if (isNaN(sharesNum) || isNaN(avgPriceNum) || sharesNum <= 0 || avgPriceNum <= 0) {\r\n      alert(\"Please enter valid numbers\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const newHolding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'> = {\r\n        symbol: selectedStock.symbol,\r\n        name: selectedStock.shortname || selectedStock.longname || selectedStock.symbol,\r\n        shares: sharesNum,\r\n        avgPrice: avgPriceNum,\r\n        currentPrice: 0, // Will be updated by the portfolio\r\n        value: 0,\r\n        return: 0,\r\n        returnPercentage: 0,\r\n      };\r\n\r\n      onAddStock(newHolding);\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error(\"Error adding stock:\", error);\r\n      alert(\"Error adding stock to portfolio\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setSearchQuery(\"\");\r\n    setSearchResults([]);\r\n    setSelectedStock(null);\r\n    setShares(\"\");\r\n    setAvgPrice(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"relative w-full max-w-md bg-background rounded-lg shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-card\">\r\n          <h2 className=\"text-xl font-bold\">Add Stock to Portfolio</h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 text-text-secondary hover:text-text-primary transition-colors\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Stock Search */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              Stock Symbol\r\n            </label>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary\" />\r\n              <input\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => handleSearch(e.target.value)}\r\n                placeholder=\"Search stocks (e.g., AAPL, MSFT)\"\r\n                className=\"w-full pl-10 pr-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n              />\r\n            </div>\r\n\r\n            {/* Search Results */}\r\n            {searchResults.length > 0 && (\r\n              <div className=\"mt-2 max-h-48 overflow-y-auto bg-card rounded-lg border border-background\">\r\n                {searchResults.map((result, index) => (\r\n                  <button\r\n                    key={`${result.symbol}-${index}`}\r\n                    onClick={() => handleStockSelect(result)}\r\n                    className=\"w-full p-3 text-left hover:bg-background transition-colors border-b border-background last:border-b-0\"\r\n                  >\r\n                    <div className=\"font-medium text-text-primary\">{result.symbol}</div>\r\n                    <div className=\"text-sm text-text-secondary\">\r\n                      {result.shortname || result.longname}\r\n                    </div>\r\n                    <div className=\"text-xs text-text-secondary\">\r\n                      {result.exchange} • {result.typeDisp}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {isSearching && (\r\n              <div className=\"mt-2 text-sm text-text-secondary\">\r\n                Searching...\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Selected Stock Info */}\r\n          {selectedStock && (\r\n            <div className=\"bg-card rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <div className=\"font-medium text-text-primary\">{selectedStock.symbol}</div>\r\n                  <div className=\"text-sm text-text-secondary\">\r\n                    {selectedStock.shortname || selectedStock.longname}\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setSelectedStock(null)}\r\n                  className=\"text-text-secondary hover:text-text-primary\"\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Number of Shares */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              Number of Shares\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={shares}\r\n              onChange={(e) => setShares(e.target.value)}\r\n              placeholder=\"Enter number of shares\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Average Price */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              Average Price per Share ($)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={avgPrice}\r\n              onChange={(e) => setAvgPrice(e.target.value)}\r\n              placeholder=\"Enter average price\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Total Investment Preview */}\r\n          {shares && avgPrice && !isNaN(parseFloat(shares)) && !isNaN(parseFloat(avgPrice)) && (\r\n            <div className=\"bg-card rounded-lg p-4\">\r\n              <div className=\"text-sm text-text-secondary mb-1\">Total Investment</div>\r\n              <div className=\"text-lg font-semibold text-text-primary\">\r\n                ${(parseFloat(shares) * parseFloat(avgPrice)).toFixed(2)}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!selectedStock || !shares || !avgPrice || isSubmitting}\r\n            className=\"w-full bg-accent text-white py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                Adding...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Plus className=\"h-4 w-4\" />\r\n                Add to Portfolio\r\n              </>\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AAEA;AADA;AAAA;AAAA;;;AAHA;;;;AAwBO,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,gBAAgB,EAAsB;;IACjG,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IACrE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAuB;IACxE,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,eAAe,OAAO;QAC1B,eAAe;QACf,IAAI,MAAM,MAAM,IAAI,GAAG;YACrB,eAAe;YACf,IAAI;gBACF,MAAM,UAAU,MAAM,CAAA,GAAA,wIAAA,CAAA,eAAY,AAAD,EAAE;gBACnC,yCAAyC;gBACzC,MAAM,kBAAkB,QAAQ,MAAM,CACpC,CAAA,SAAU,CAAC,iBAAiB,IAAI,CAAC,CAAA,UAAW,QAAQ,MAAM,KAAK,OAAO,MAAM;gBAE9E,iBAAiB,gBAAgB,KAAK,CAAC,GAAG;YAC5C,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,iBAAiB,EAAE;YACrB,SAAU;gBACR,eAAe;YACjB;QACF,OAAO;YACL,iBAAiB,EAAE;QACrB;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,iBAAiB;QACjB,iBAAiB,EAAE;QACnB,eAAe,MAAM,MAAM;IAC7B;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,UAAU;YAC1C,MAAM;YACN;QACF;QAEA,MAAM,YAAY,WAAW;QAC7B,MAAM,cAAc,WAAW;QAE/B,IAAI,MAAM,cAAc,MAAM,gBAAgB,aAAa,KAAK,eAAe,GAAG;YAChF,MAAM;YACN;QACF;QAEA,gBAAgB;QAChB,IAAI;YACF,MAAM,aAA+F;gBACnG,QAAQ,cAAc,MAAM;gBAC5B,MAAM,cAAc,SAAS,IAAI,cAAc,QAAQ,IAAI,cAAc,MAAM;gBAC/E,QAAQ;gBACR,UAAU;gBACV,cAAc;gBACd,OAAO;gBACP,QAAQ;gBACR,kBAAkB;YACpB;YAEA,WAAW;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM;QACR,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,YAAY;QAChB,eAAe;QACf,iBAAiB,EAAE;QACnB,iBAAiB;QACjB,UAAU;QACV,YAAY;IACd;IAEA,MAAM,cAAc;QAClB;QACA;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAoB;;;;;;sCAClC,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,+LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEtC,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAAmD;;;;;;8CAGpE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,yMAAA,CAAA,SAAM;4CAAC,WAAU;;;;;;sDAClB,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;4CAC5C,aAAY;4CACZ,WAAU;;;;;;;;;;;;gCAKb,cAAc,MAAM,GAAG,mBACtB,6LAAC;oCAAI,WAAU;8CACZ,cAAc,GAAG,CAAC,CAAC,QAAQ,sBAC1B,6LAAC;4CAEC,SAAS,IAAM,kBAAkB;4CACjC,WAAU;;8DAEV,6LAAC;oDAAI,WAAU;8DAAiC,OAAO,MAAM;;;;;;8DAC7D,6LAAC;oDAAI,WAAU;8DACZ,OAAO,SAAS,IAAI,OAAO,QAAQ;;;;;;8DAEtC,6LAAC;oDAAI,WAAU;;wDACZ,OAAO,QAAQ;wDAAC;wDAAI,OAAO,QAAQ;;;;;;;;2CATjC,GAAG,OAAO,MAAM,CAAC,CAAC,EAAE,OAAO;;;;;;;;;;gCAgBvC,6BACC,6LAAC;oCAAI,WAAU;8CAAmC;;;;;;;;;;;;wBAOrD,+BACC,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAI,WAAU;0DAAiC,cAAc,MAAM;;;;;;0DACpE,6LAAC;gDAAI,WAAU;0DACZ,cAAc,SAAS,IAAI,cAAc,QAAQ;;;;;;;;;;;;kDAGtD,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,iBAAiB;wCAChC,WAAU;kDAEV,cAAA,6LAAC,+LAAA,CAAA,IAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;sCAOrB,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAAmD;;;;;;8CAGpE,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oCACzC,aAAY;oCACZ,MAAK;oCACL,KAAI;oCACJ,WAAU;oCACV,QAAQ;;;;;;;;;;;;sCAKZ,6LAAC;;8CACC,6LAAC;oCAAM,WAAU;8CAAmD;;;;;;8CAGpE,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,aAAY;oCACZ,MAAK;oCACL,KAAI;oCACJ,WAAU;oCACV,QAAQ;;;;;;;;;;;;wBAKX,UAAU,YAAY,CAAC,MAAM,WAAW,YAAY,CAAC,MAAM,WAAW,4BACrE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CAAmC;;;;;;8CAClD,6LAAC;oCAAI,WAAU;;wCAA0C;wCACrD,CAAC,WAAW,UAAU,WAAW,SAAS,EAAE,OAAO,CAAC;;;;;;;;;;;;;sCAM5D,6LAAC;4BACC,MAAK;4BACL,UAAU,CAAC,iBAAiB,CAAC,UAAU,CAAC,YAAY;4BACpD,WAAU;sCAET,6BACC;;kDACE,6LAAC;wCAAI,WAAU;;;;;;oCAAiF;;6DAIlG;;kDACE,6LAAC,qMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;;;;;;;AAS5C;GA9OgB;KAAA"}},
    {"offset": {"line": 2730, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2736, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/portfolio/EditStockModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { X, Save } from \"lucide-react\";\r\n\r\ninterface PortfolioHolding {\r\n  symbol: string;\r\n  name: string;\r\n  shares: number;\r\n  avgPrice: number;\r\n  currentPrice: number;\r\n  value: number;\r\n  return: number;\r\n  returnPercentage: number;\r\n}\r\n\r\ninterface EditStockModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onUpdateStock: (symbol: string, updatedHolding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'>) => void;\r\n  holding: PortfolioHolding | null;\r\n}\r\n\r\nexport function EditStockModal({ isOpen, onClose, onUpdateStock, holding }: EditStockModalProps) {\r\n  const [shares, setShares] = useState(\"\");\r\n  const [avgPrice, setAvgPrice] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Update form when holding changes\r\n  useEffect(() => {\r\n    if (holding) {\r\n      setShares(holding.shares.toString());\r\n      setAvgPrice(holding.avgPrice.toString());\r\n    }\r\n  }, [holding]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!holding || !shares || !avgPrice) {\r\n      alert(\"Please fill in all fields\");\r\n      return;\r\n    }\r\n\r\n    const sharesNum = parseFloat(shares);\r\n    const avgPriceNum = parseFloat(avgPrice);\r\n\r\n    if (isNaN(sharesNum) || isNaN(avgPriceNum) || sharesNum <= 0 || avgPriceNum <= 0) {\r\n      alert(\"Please enter valid numbers\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const updatedHolding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'> = {\r\n        symbol: holding.symbol,\r\n        name: holding.name,\r\n        shares: sharesNum,\r\n        avgPrice: avgPriceNum,\r\n        currentPrice: 0, // Will be updated by the portfolio\r\n        value: 0,\r\n        return: 0,\r\n        returnPercentage: 0,\r\n      };\r\n\r\n      onUpdateStock(holding.symbol, updatedHolding);\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error(\"Error updating stock:\", error);\r\n      alert(\"Error updating stock in portfolio\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setShares(\"\");\r\n    setAvgPrice(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen || !holding) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"relative w-full max-w-md bg-background rounded-lg shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-card\">\r\n          <h2 className=\"text-xl font-bold\">Edit Stock Position</h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 text-text-secondary hover:text-text-primary transition-colors\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Stock Info */}\r\n          <div className=\"bg-card rounded-lg p-4\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-text-primary\">{holding.symbol}</div>\r\n              <div className=\"text-sm text-text-secondary\">{holding.name}</div>\r\n              <div className=\"text-sm text-text-secondary mt-1\">\r\n                Current Price: ${holding.currentPrice.toFixed(2)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Number of Shares */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              Number of Shares\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={shares}\r\n              onChange={(e) => setShares(e.target.value)}\r\n              placeholder=\"Enter number of shares\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Average Price */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              Average Price per Share ($)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              value={avgPrice}\r\n              onChange={(e) => setAvgPrice(e.target.value)}\r\n              placeholder=\"Enter average price\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Total Investment Preview */}\r\n          {shares && avgPrice && !isNaN(parseFloat(shares)) && !isNaN(parseFloat(avgPrice)) && (\r\n            <div className=\"bg-card rounded-lg p-4\">\r\n              <div className=\"text-sm text-text-secondary mb-1\">Total Investment</div>\r\n              <div className=\"text-lg font-semibold text-text-primary\">\r\n                ${(parseFloat(shares) * parseFloat(avgPrice)).toFixed(2)}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Current vs New Investment Comparison */}\r\n          {shares && avgPrice && !isNaN(parseFloat(shares)) && !isNaN(parseFloat(avgPrice)) && (\r\n            <div className=\"bg-card rounded-lg p-4 space-y-2\">\r\n              <div className=\"text-sm text-text-secondary\">Investment Comparison</div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span>Current Investment:</span>\r\n                <span>${(holding.shares * holding.avgPrice).toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span>New Investment:</span>\r\n                <span>${(parseFloat(shares) * parseFloat(avgPrice)).toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm font-medium\">\r\n                <span>Difference:</span>\r\n                <span className={parseFloat(shares) * parseFloat(avgPrice) - (holding.shares * holding.avgPrice) >= 0 ? 'text-success' : 'text-error'}>\r\n                  {parseFloat(shares) * parseFloat(avgPrice) - (holding.shares * holding.avgPrice) >= 0 ? '+' : ''}\r\n                  ${(parseFloat(shares) * parseFloat(avgPrice) - (holding.shares * holding.avgPrice)).toFixed(2)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!shares || !avgPrice || isSubmitting}\r\n            className=\"w-full bg-accent text-white py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                Updating...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Save className=\"h-4 w-4\" />\r\n                Update Position\r\n              </>\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 3132, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3138, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/components/features/portfolio/CashModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X, DollarSign, TrendingUp, TrendingDown } from \"lucide-react\";\r\n\r\ninterface CashModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onTransaction: (amount: number) => void;\r\n  action: 'deposit' | 'withdraw';\r\n  currentBalance: number;\r\n}\r\n\r\nexport function CashModal({ isOpen, onClose, onTransaction, action, currentBalance }: CashModalProps) {\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!amount) {\r\n      alert(\"Please enter an amount\");\r\n      return;\r\n    }\r\n\r\n    const amountNum = parseFloat(amount);\r\n\r\n    if (isNaN(amountNum) || amountNum <= 0) {\r\n      alert(\"Please enter a valid amount\");\r\n      return;\r\n    }\r\n\r\n    if (action === 'withdraw' && amountNum > currentBalance) {\r\n      alert(\"Insufficient cash balance for withdrawal\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      onTransaction(amountNum);\r\n      resetForm();\r\n    } catch (error) {\r\n      console.error(\"Error processing transaction:\", error);\r\n      alert(\"Error processing transaction\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setAmount(\"\");\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  const getQuickAmounts = () => {\r\n    if (action === 'deposit') {\r\n      return [100, 500, 1000, 5000, 10000];\r\n    } else {\r\n      return [100, 500, 1000, Math.floor(currentBalance / 2), currentBalance];\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const isDeposit = action === 'deposit';\r\n  const quickAmounts = getQuickAmounts();\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"relative w-full max-w-md bg-background rounded-lg shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-card\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className={`p-2 rounded-lg ${isDeposit ? 'bg-success/20 text-success' : 'bg-error/20 text-error'}`}>\r\n              {isDeposit ? <TrendingUp className=\"h-5 w-5\" /> : <TrendingDown className=\"h-5 w-5\" />}\r\n            </div>\r\n            <h2 className=\"text-xl font-bold\">\r\n              {isDeposit ? 'Deposit Funds' : 'Withdraw Funds'}\r\n            </h2>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 text-text-secondary hover:text-text-primary transition-colors\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Current Balance */}\r\n          <div className=\"bg-card rounded-lg p-4\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-sm text-text-secondary mb-1\">Current Cash Balance</div>\r\n              <div className=\"text-2xl font-bold text-accent\">${currentBalance.toLocaleString()}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Amount Input */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-text-primary mb-2\">\r\n              {isDeposit ? 'Deposit Amount ($)' : 'Withdrawal Amount ($)'}\r\n            </label>\r\n            <div className=\"relative\">\r\n              <DollarSign className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-text-secondary\" />\r\n              <input\r\n                type=\"number\"\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                placeholder={`Enter ${isDeposit ? 'deposit' : 'withdrawal'} amount`}\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                max={isDeposit ? undefined : currentBalance}\r\n                className=\"w-full pl-10 pr-4 py-2 rounded-lg bg-card text-text-primary placeholder:text-text-secondary focus:outline-none focus:ring-2 focus:ring-accent\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Amount Buttons */}\r\n          <div>\r\n            <div className=\"text-sm text-text-secondary mb-3\">Quick Amounts</div>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              {quickAmounts.map((quickAmount) => (\r\n                <button\r\n                  key={quickAmount}\r\n                  type=\"button\"\r\n                  onClick={() => setAmount(quickAmount.toString())}\r\n                  className=\"px-3 py-2 text-sm rounded-lg bg-card text-text-primary hover:bg-background transition-colors border border-card\"\r\n                >\r\n                  ${quickAmount.toLocaleString()}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Transaction Preview */}\r\n          {amount && !isNaN(parseFloat(amount)) && (\r\n            <div className=\"bg-card rounded-lg p-4 space-y-2\">\r\n              <div className=\"text-sm text-text-secondary\">Transaction Preview</div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span>Current Balance:</span>\r\n                <span>${currentBalance.toLocaleString()}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span>{isDeposit ? 'Deposit Amount:' : 'Withdrawal Amount:'}</span>\r\n                <span className={isDeposit ? 'text-success' : 'text-error'}>\r\n                  {isDeposit ? '+' : '-'}${parseFloat(amount).toLocaleString()}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm font-medium border-t border-background pt-2\">\r\n                <span>New Balance:</span>\r\n                <span className=\"text-accent\">\r\n                  ${(currentBalance + (isDeposit ? parseFloat(amount) : -parseFloat(amount))).toLocaleString()}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Warning for insufficient funds */}\r\n          {action === 'withdraw' && amount && !isNaN(parseFloat(amount)) && parseFloat(amount) > currentBalance && (\r\n            <div className=\"bg-error/10 border border-error/20 rounded-lg p-3\">\r\n              <div className=\"text-sm text-error\">\r\n                ⚠️ Insufficient funds. You cannot withdraw more than your current balance.\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!amount || isNaN(parseFloat(amount)) || parseFloat(amount) <= 0 || (action === 'withdraw' && parseFloat(amount) > currentBalance) || isSubmitting}\r\n            className={`w-full py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${\r\n              isDeposit \r\n                ? 'bg-success text-white hover:bg-success/90' \r\n                : 'bg-error text-white hover:bg-error/90'\r\n            }`}\r\n          >\r\n            {isSubmitting ? (\r\n              <>\r\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                Processing...\r\n              </>\r\n            ) : (\r\n              <>\r\n                {isDeposit ? <TrendingUp className=\"h-4 w-4\" /> : <TrendingDown className=\"h-4 w-4\" />}\r\n                {isDeposit ? 'Deposit Funds' : 'Withdraw Funds'}\r\n              </>\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 3575, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3581, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/patel/Downloads/temp/tradinglocal/jsprolocal/src/app/portfolio/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { Dashboard } from \"@/components/layout/Dashboard\";\r\nimport { AssetDistribution } from \"@/components/features/portfolio/AssetDistribution\";\r\nimport { HoldingsTable } from \"@/components/features/portfolio/HoldingsTable\";\r\nimport { AddStockModal } from \"@/components/features/portfolio/AddStockModal\";\r\nimport { EditStockModal } from \"@/components/features/portfolio/EditStockModal\";\r\nimport { CashModal } from \"@/components/features/portfolio/CashModal\";\r\nimport { getStockQuote } from \"@/app/actions/stockActions\";\r\n\r\ninterface PortfolioHolding {\r\n  symbol: string;\r\n  name: string;\r\n  shares: number;\r\n  avgPrice: number;\r\n  currentPrice: number;\r\n  value: number;\r\n  return: number;\r\n  returnPercentage: number;\r\n}\r\n\r\ninterface PortfolioMetrics {\r\n  totalValue: number;\r\n  totalReturn: number;\r\n  returnPercentage: number;\r\n  todayReturn: number;\r\n  todayPercentage: number;\r\n  cashBalance: number;\r\n}\r\n\r\nexport default function PortfolioPage() {\r\n  const [holdings, setHoldings] = useState<PortfolioHolding[]>([]);\r\n  const [cashBalance, setCashBalance] = useState<number>(0);\r\n  const [metrics, setMetrics] = useState<PortfolioMetrics>({\r\n    totalValue: 0,\r\n    totalReturn: 0,\r\n    returnPercentage: 0,\r\n    todayReturn: 0,\r\n    todayPercentage: 0,\r\n    cashBalance: 0,\r\n  });\r\n  const [isAddStockModalOpen, setIsAddStockModalOpen] = useState(false);\r\n  const [isEditStockModalOpen, setIsEditStockModalOpen] = useState(false);\r\n  const [isCashModalOpen, setIsCashModalOpen] = useState(false);\r\n  const [cashAction, setCashAction] = useState<'deposit' | 'withdraw'>('deposit');\r\n  const [selectedHolding, setSelectedHolding] = useState<PortfolioHolding | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Load portfolio data from localStorage on component mount\r\n  useEffect(() => {\r\n    loadPortfolioData();\r\n  }, []);\r\n\r\n  // Update current prices and recalculate metrics when holdings change\r\n  useEffect(() => {\r\n    if (holdings.length > 0) {\r\n      updateCurrentPrices();\r\n    } else {\r\n      // Reset metrics when no holdings\r\n      calculateMetrics([]);\r\n      setIsLoading(false);\r\n    }\r\n  }, [holdings.length]); // Only depend on holdings.length to avoid infinite loops\r\n\r\n  const loadPortfolioData = useCallback(() => {\r\n    try {\r\n      const savedHoldings = localStorage.getItem('portfolioHoldings');\r\n      const savedCash = localStorage.getItem('portfolioCash');\r\n      \r\n      if (savedHoldings) {\r\n        const parsedHoldings = JSON.parse(savedHoldings);\r\n        setHoldings(parsedHoldings);\r\n      }\r\n      \r\n      if (savedCash) {\r\n        const parsedCash = parseFloat(savedCash);\r\n        setCashBalance(parsedCash);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading portfolio data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const updateCurrentPrices = useCallback(async () => {\r\n    try {\r\n      const updatedHoldings = await Promise.all(\r\n        holdings.map(async (holding) => {\r\n          try {\r\n            const quote = await getStockQuote(holding.symbol);\r\n            const currentPrice = quote.price;\r\n            const value = holding.shares * currentPrice;\r\n            const totalCost = holding.shares * holding.avgPrice;\r\n            const returnAmount = value - totalCost;\r\n            const returnPercentage = (returnAmount / totalCost) * 100;\r\n\r\n            return {\r\n              ...holding,\r\n              currentPrice,\r\n              value,\r\n              return: returnAmount,\r\n              returnPercentage,\r\n            };\r\n          } catch (error) {\r\n            console.error(`Error fetching price for ${holding.symbol}:`, error);\r\n            return holding;\r\n          }\r\n        })\r\n      );\r\n\r\n      setHoldings(updatedHoldings);\r\n      calculateMetrics(updatedHoldings);\r\n      savePortfolioData(updatedHoldings);\r\n    } catch (error) {\r\n      console.error('Error updating current prices:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [holdings]);\r\n\r\n  const calculateMetrics = useCallback((currentHoldings: PortfolioHolding[]) => {\r\n    const stockValue = currentHoldings.reduce((sum, holding) => sum + holding.value, 0);\r\n    const totalValue = stockValue + cashBalance;\r\n    const totalCost = currentHoldings.reduce((sum, holding) => sum + (holding.shares * holding.avgPrice), 0);\r\n    const totalReturn = stockValue - totalCost; // Only calculate return on stocks, not cash\r\n    const returnPercentage = totalCost > 0 ? (totalReturn / totalCost) * 100 : 0;\r\n\r\n    setMetrics({\r\n      totalValue,\r\n      totalReturn,\r\n      returnPercentage,\r\n      todayReturn: 0, // This would need real-time data\r\n      todayPercentage: 0,\r\n      cashBalance,\r\n    });\r\n  }, [cashBalance]);\r\n\r\n  const savePortfolioData = useCallback((data: PortfolioHolding[]) => {\r\n    try {\r\n      localStorage.setItem('portfolioHoldings', JSON.stringify(data));\r\n      localStorage.setItem('portfolioCash', cashBalance.toString());\r\n    } catch (error) {\r\n      console.error('Error saving portfolio data:', error);\r\n    }\r\n  }, [cashBalance]);\r\n\r\n  const handleAddStock = useCallback((newHolding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'>) => {\r\n    const updatedHoldings = [...holdings, newHolding];\r\n    setHoldings(updatedHoldings);\r\n    savePortfolioData(updatedHoldings);\r\n    setIsAddStockModalOpen(false);\r\n  }, [holdings, savePortfolioData]);\r\n\r\n  const handleUpdateStock = useCallback((symbol: string, updatedHolding: Omit<PortfolioHolding, 'currentPrice' | 'value' | 'return' | 'returnPercentage'>) => {\r\n    const updatedHoldings = holdings.map(holding => \r\n      holding.symbol === symbol \r\n        ? { ...updatedHolding, currentPrice: holding.currentPrice, value: 0, return: 0, returnPercentage: 0 }\r\n        : holding\r\n    );\r\n    setHoldings(updatedHoldings);\r\n    savePortfolioData(updatedHoldings);\r\n    setIsEditStockModalOpen(false);\r\n    setSelectedHolding(null);\r\n  }, [holdings, savePortfolioData]);\r\n\r\n  const handleRemoveStock = useCallback((symbol: string) => {\r\n    const updatedHoldings = holdings.filter(holding => holding.symbol !== symbol);\r\n    setHoldings(updatedHoldings);\r\n    savePortfolioData(updatedHoldings);\r\n  }, [holdings, savePortfolioData]);\r\n\r\n  const handleEditStock = useCallback((holding: PortfolioHolding) => {\r\n    setSelectedHolding(holding);\r\n    setIsEditStockModalOpen(true);\r\n  }, []);\r\n\r\n  const handleCashAction = useCallback((action: 'deposit' | 'withdraw') => {\r\n    setCashAction(action);\r\n    setIsCashModalOpen(true);\r\n  }, []);\r\n\r\n  const handleCashTransaction = useCallback((amount: number) => {\r\n    let newCashBalance = cashBalance;\r\n    \r\n    if (cashAction === 'deposit') {\r\n      newCashBalance += amount;\r\n    } else if (cashAction === 'withdraw') {\r\n      if (amount > cashBalance) {\r\n        alert('Insufficient cash balance for withdrawal');\r\n        return;\r\n      }\r\n      newCashBalance -= amount;\r\n    }\r\n    \r\n    setCashBalance(newCashBalance);\r\n    localStorage.setItem('portfolioCash', newCashBalance.toString());\r\n    calculateMetrics(holdings);\r\n    setIsCashModalOpen(false);\r\n  }, [cashBalance, cashAction, holdings, calculateMetrics]);\r\n\r\n  const handleQuickAction = useCallback((action: string) => {\r\n    switch (action) {\r\n      case 'deposit':\r\n        handleCashAction('deposit');\r\n        break;\r\n      case 'buy':\r\n        setIsAddStockModalOpen(true);\r\n        break;\r\n      case 'sell':\r\n        alert('Sell functionality would be implemented here');\r\n        break;\r\n      case 'withdraw':\r\n        handleCashAction('withdraw');\r\n        break;\r\n    }\r\n  }, [handleCashAction]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Dashboard>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-text-secondary\">Loading portfolio...</div>\r\n        </div>\r\n      </Dashboard>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dashboard>\r\n      <div className=\"space-y-8\">\r\n        {/* Portfolio Summary */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n          <div className=\"bg-card rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Total Value</h3>\r\n            <div className=\"text-3xl font-bold\">${metrics.totalValue.toLocaleString()}</div>\r\n            <div className={`text-sm ${metrics.totalReturn >= 0 ? 'text-success' : 'text-error'}`}>\r\n              {metrics.totalReturn >= 0 ? '+' : ''}${metrics.totalReturn.toFixed(2)} ({metrics.returnPercentage.toFixed(2)}%)\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-card rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Cash Balance</h3>\r\n            <div className=\"text-3xl font-bold text-success\">${cashBalance.toLocaleString()}</div>\r\n            <div className=\"text-sm text-text-secondary\">\r\n              Available for trading\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-card rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Total Return</h3>\r\n            <div className={`text-3xl font-bold ${metrics.totalReturn >= 0 ? 'text-success' : 'text-error'}`}>\r\n              {metrics.totalReturn >= 0 ? '+' : ''}${metrics.totalReturn.toFixed(2)}\r\n            </div>\r\n            <div className=\"text-sm text-text-secondary\">\r\n              {metrics.returnPercentage.toFixed(2)}% return\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-card rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-2\">Holdings</h3>\r\n            <div className=\"text-3xl font-bold\">{holdings.length}</div>\r\n            <div className=\"text-sm text-text-secondary\">Different stocks</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Asset Distribution */}\r\n          <div className=\"lg:col-span-2\">\r\n            <AssetDistribution holdings={holdings} totalValue={metrics.totalValue} cashBalance={cashBalance} />\r\n          </div>\r\n\r\n          {/* Quick Actions */}\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold mb-4\">Quick Actions</h2>\r\n            <div className=\"space-y-3\">\r\n              <button\r\n                onClick={() => handleQuickAction('deposit')}\r\n                className=\"w-full bg-accent text-white py-3 px-4 rounded-lg hover:bg-accent/90 transition-colors\"\r\n              >\r\n                Deposit Funds\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickAction('buy')}\r\n                className=\"w-full bg-success text-white py-3 px-4 rounded-lg hover:bg-success/90 transition-colors\"\r\n              >\r\n                Buy Stocks\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickAction('sell')}\r\n                className=\"w-full bg-error text-white py-3 px-4 rounded-lg hover:bg-error/90 transition-colors\"\r\n              >\r\n                Sell Stocks\r\n              </button>\r\n              <button\r\n                onClick={() => handleQuickAction('withdraw')}\r\n                className=\"w-full bg-card text-text-primary py-3 px-4 rounded-lg hover:bg-background transition-colors border border-card\"\r\n              >\r\n                Withdraw Funds\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Holdings Table */}\r\n        <div>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-lg font-semibold\">Asset Holdings</h2>\r\n            <button\r\n              onClick={() => setIsAddStockModalOpen(true)}\r\n              className=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-accent/90 transition-colors\"\r\n            >\r\n              Add Stock\r\n            </button>\r\n          </div>\r\n          <HoldingsTable \r\n            holdings={holdings} \r\n            onRemoveStock={handleRemoveStock}\r\n            onEditStock={handleEditStock}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add Stock Modal */}\r\n      <AddStockModal\r\n        isOpen={isAddStockModalOpen}\r\n        onClose={() => setIsAddStockModalOpen(false)}\r\n        onAddStock={handleAddStock}\r\n        existingHoldings={holdings}\r\n      />\r\n\r\n      {/* Edit Stock Modal */}\r\n      <EditStockModal\r\n        isOpen={isEditStockModalOpen}\r\n        onClose={() => {\r\n          setIsEditStockModalOpen(false);\r\n          setSelectedHolding(null);\r\n        }}\r\n        onUpdateStock={handleUpdateStock}\r\n        holding={selectedHolding}\r\n      />\r\n\r\n      {/* Cash Modal */}\r\n      <CashModal\r\n        isOpen={isCashModalOpen}\r\n        onClose={() => setIsCashModalOpen(false)}\r\n        onTransaction={handleCashTransaction}\r\n        action={cashAction}\r\n        currentBalance={cashBalance}\r\n      />\r\n    </Dashboard>\r\n  );\r\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 4207, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}